import{c as m}from"./index-BFZQxHcS.js";const c=m("https://edecftnrzqsnavnmsqol.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVkZWNmdG5yenFzbmF2bm1zcW9sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1MTgxNDksImV4cCI6MjA2NjA5NDE0OX0.T-pzRGJQBer8cqj3W58erOSVAqL0AD-rjKEA281qyQ0"),s=document.getElementById("articles-list"),y=document.getElementById("add-article-btn"),I=document.getElementById("logout-btn"),d=document.getElementById("modal"),n=document.getElementById("article-form"),f=document.getElementById("modal-title"),g=document.getElementById("cancel-btn"),b=document.getElementById("article-template");let l=null;async function h(){var t;const{data:e}=await c.auth.getSession();return(t=e.session)==null?void 0:t.user}async function i(){const{data:e}=await c.from("articles").select("*").order("created_at",{ascending:!1}),t=await h();s.innerHTML="",e==null||e.forEach(a=>{const o=b.content.cloneNode(!0);o.querySelector("[data-title]").textContent=a.title,o.querySelector("[data-subtitle]").textContent=a.subtitle,o.querySelector("[data-content]").textContent=a.content,o.querySelector("[data-author]").textContent=a.author,o.querySelector("[data-date]").textContent=new Date(a.created_at).toLocaleString(),t?(o.querySelector(".edit-btn").onclick=()=>r("edit",a),o.querySelector(".delete-btn").onclick=()=>p(a.id)):o.querySelector("[data-owner-actions]").remove(),s.appendChild(o)})}function r(e,t={}){d.classList.remove("hidden"),f.textContent=e==="edit"?"Edytuj artykuł":"Dodaj artykuł",n.title.value=t.title||"",n.subtitle.value=t.subtitle||"",n.author.value=t.author||"",n.content.value=t.content||"",l=e==="edit"?t.id:null}function u(){d.classList.add("hidden"),n.reset(),l=null}n.addEventListener("submit",async e=>{e.preventDefault();const t={title:n.title.value,subtitle:n.subtitle.value,author:n.author.value,content:n.content.value,created_at:new Date().toISOString()};l?await c.from("articles").update(t).eq("id",l):await c.from("articles").insert([t]),u(),i()});async function p(e){await c.from("articles").delete().eq("id",e),i()}y.onclick=()=>r("add");g.onclick=u;I.onclick=async()=>{await c.auth.signOut(),window.location.href="/login.html"};i();
